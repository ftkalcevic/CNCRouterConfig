%
#<_start_dia>   = 0.740 (inches)
#<_end_dia>     = 0.525 (inches)
#<_zdec>        = 0.001 (inches)
#<_feedrate>    = 15    (inches per minute)
#<_tpr_angl>    = 2.0   (degrees)
#<_zfeed>       = -0.600 (inches)
#<_angle_cos>   = [1.000000 - cos[#<_tpr_angl>]]
#<_mill_rad>    = 0.125
(debug, angle_cos = #<_angle_cos>)

( now calc some of the stuff we'll use)
#<_start_rad>   = [[#<_start_dia> / 2.0000000] + #<_mill_rad>]
#<_end_rad>     = [[#<_end_dia>   / 2.0000000] + #<_mill_rad>]
( Now, calculate tmp_rad_dec)

s2500
(subroutine to cut a circle)
o100 sub
( are we  cutting air? )
g1f#<_feedrate> x[0.0000 - #<_loop_rad>] y0.0 z#<_tempz>
g2f#<_feedrate> i#<_loop_rad>
o100 endsub

m03 (start spindle)

( do the outer tmp_rad loop, o100 will return if loop_rad isn't cutting)
(start from outside of hub)
#<_tmp_rad> = #<_start_rad>

(circle inward)
o200 while [#<_end_rad> lt #<_tmp_rad>]
(reduce starting diameter of o200 loop)
#<_tmp_rad> =[#<_tmp_rad> - #<_angle_cos>]
#<_loop_rad> = #<_tmp_rad>
(we're at the top of the loop, restore tempz )
#<_tempz> = 0.000000
g0z0.1
o300 while [#<_tempz> gt #<_zfeed>]
( cut ever larger till o100 hits the return )
#<_loop_rad> = [#<_loop_rad> + #<_angle_cos>]
#<_tempz> = [#<_tempz> - #<_zdec>]

o301 if [#<_loop_rad> lt #<_start_rad>]
(debug,o301 tmpz=#<_tempz> loop_rad=#<_loop_rad>)
(make one cut)
o100 call

o301 endif

o300 endwhile
o200 endwhile
m05 (stop spindle)
m02

